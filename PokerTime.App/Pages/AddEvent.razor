@page "/events"
@page "/events/{EventId:int}"

@attribute [Authorize]


<h3>New Event</h3>


<EditForm Model="@Event" OnValidSubmit="@HandleValidSubmit" OnInvalidSubmit="@HandleInvalidSubmit">
    @*<DataAnnotationsValidator />
        <ValidationSummary />*@
    <div class="form-group row">
        <label for="structure" class="col-form-label">Select Tournament Structure: </label>

        <InputSelect id="structure" @bind-Value="@TournamentStructureId">
            @foreach (var structure in TournamentStructures)
                {
                <option value="@structure.Id">@structure.Name</option>
                }
        </InputSelect>
    </div>
    <h3>Invitees</h3>

    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Phone (optional)</th>
                <th></th>
                <th></th>
            </tr>
        </thead>


        @foreach (var invitee in Invitees)
        {
            <tr>
                
                <td><InputText id="Name" @bind-Value="@invitee.Name" /></td>

                
                <td><InputText id="Email" @bind-Value="@invitee.Email" /></td>

                
                <td><InputText id="Phone" @bind-Value="@invitee.Phone" /></td>
                <td>
                    <a class="btn btn-outline-primary edit-outline-btn" @onclick="@(() => RemoveInvitee(invitee))">
                    Remove
                    </a>
                </td>
            </tr>

        }
    </table>
</EditForm>

    <div class="form-group row">
        <a class="btn btn-outline-primary edit-outline-btn" @onclick="@(() => AddInvitee())">
            Add Invitee
        </a>
    </div>

    <button type="submit" @onclick="HandleValidSubmit" class="btn btn-primary edit-btn">Save Invitees</button>
    <a class="btn btn-outline-primary edit-outline-btn" @onclick="@NavigateToStructure">Cancel</a>

